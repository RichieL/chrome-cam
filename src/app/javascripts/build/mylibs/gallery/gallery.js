// Generated by CoffeeScript 1.3.3
(function() {

  define(['mylibs/utils/utils', 'mylibs/filesystem/filesystem', 'text!mylibs/gallery/views/gallery.html'], function(utils, filesystem, template) {
    var pub;
    return pub = {
      init: function(selector) {
        var $container, $thumbnailList;
        $container = $(selector);
        $container.append($(template));
        $thumbnailList = $(".thumbnails", $container);
        $thumbnailList.kendoListView({
          template: kendo.template($("#gallery-thumbnail").html()),
          dataSource: filesystem.dataSource
        });
        $thumbnailList.on("click", ".thumbnail", function() {
          return $.publish("/gallery/show", [$(this).data("file-name")]);
        });
        $.subscribe("/gallery/list", function() {
          $.publish("/previews/pause", [true]);
          $container.slideDown();
          return $("#preview").slideUp();
        });
        $.subscribe("/gallery/hide", function() {
          $container.slideUp();
          return $("#preview").slideDown(function() {
            return $.publish("/previews/pause", [false]);
          });
        });
        return $.subscribe("/gallery/show", function(fileName) {
          return console.log(fileName);
        });
      }
    };
  });

}).call(this);
