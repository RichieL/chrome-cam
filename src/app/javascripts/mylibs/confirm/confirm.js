// Generated by CoffeeScript 1.4.0
(function() {

  define(['Kendo'], function(kendo) {
    var open, pub, view,
      _this = this;
    view = {};
    this.callback = null;
    open = false;
    return pub = {
      yes: function(e) {
        view.data("kendoMobileModalView").close();
        $.publish("/tabbing/restore", [$(document.body)]);
        $(document.body).focus();
        open = false;
        if (_this.callback) {
          return _this.callback();
        }
      },
      no: function(e) {
        open = false;
        view.data("kendoMobileModalView").close();
        $.publish("/tabbing/restore", [$(document.body)]);
        return $(document.body).focus();
      },
      init: function(selector) {
        var esc;
        view = $(selector);
        $.subscribe("/confirm/show", function(title, message, callback) {
          _this.callback = callback;
          view.find(".title").html(title);
          view.find(".message").html(message);
          view.find(".yes").text(window.APP.localization.yesButton);
          view.find(".no").text(window.APP.localization.noButton);
          view.data("kendoMobileModalView").open();
          $.publish("/tabbing/remove", [$(document.body)]);
          $.publish("/tabbing/restore", [view]);
          setTimeout((function() {
            return view.find(".yes").focus();
          }), 250);
          return open = true;
        });
        esc = function() {
          if (open) {
            pub.no();
            return false;
          }
        };
        return $.subscribe("/keyboard/esc", esc, true);
      }
    };
  });

}).call(this);
