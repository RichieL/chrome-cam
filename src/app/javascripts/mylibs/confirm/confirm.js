// Generated by CoffeeScript 1.4.0
(function() {

  define(['Kendo'], function(kendo) {
    var callback, close, open, pub, view;
    view = {};
    callback = null;
    open = false;
    close = function(result) {
      view.data("kendoMobileModalView").close();
      $.publish("/tabbing/restore", [$(document.body)]);
      $(document.body).focus();
      $.publish("/postman/deliver", [true, "/menu/enable"]);
      open = false;
      if (callback) {
        return callback(result);
      }
    };
    return pub = {
      yes: function(e) {
        return close(true);
      },
      no: function(e) {
        return close(false);
      },
      init: function(selector) {
        var esc;
        view = $(selector);
        $.subscribe("/confirm/show", function(title, message, cb) {
          callback = cb;
          view.find(".title").html(title);
          view.find(".message").html(message);
          view.find(".yes").text(window.APP.localization.yesButton);
          view.find(".no").text(window.APP.localization.noButton);
          view.data("kendoMobileModalView").open();
          $.publish("/tabbing/remove", [$(document.body)]);
          $.publish("/tabbing/restore", [view]);
          setTimeout((function() {
            return view.find(".yes").focus();
          }), 250);
          $.publish("/postman/deliver", [false, "/menu/enable"]);
          return open = true;
        });
        esc = function() {
          if (open) {
            pub.no();
            return false;
          }
        };
        return $.subscribe("/keyboard/esc", esc, true);
      }
    };
  });

}).call(this);
