/*
* Kendo UI Complete v2012.3.911 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function E(a){var b=[],c=a.originalEvent,e=0,f,g,h;if(a.api)b.push({id:2,event:a,target:a.target,location:a});else if(d.touch){g=c?c.changedTouches:[];for(f=g.length;e<f;e++)h=g[e],b.push({location:h,event:a,target:h.target,id:h.identifier})}else d.pointers?b.push({location:c,event:a,target:a.target,id:c.pointerId}):b.push({id:1,event:a,target:a.target,location:a});return b}function D(a,b){var c=a.x.location,d=a.y.location,e=b.x.location,f=b.y.location,g=c-e,h=d-f;return{center:{x:(c+e)/2,y:(d+f)/2},distance:Math.sqrt(g*g+h*h)}}function C(b){b.preventDefault();var c=a(b.target),d=c.closest(".k-widget").parent();d[0]||(d=c.parent()),d.trigger(b.type)}var c=window.kendo,d=c.support,e=d.pointers,f=window.document,g=a(f.documentElement),h=c.Class,i=c.Observable,j=a.proxy,k=a.now,l=a.extend,m=d.mobileOS,n=m&&m.android,o="mousedown",p="mousemove",q="mouseup mouseleave",r=".kendoUserEvents",s="press",t="start",u="move",v="end",w="cancel",x="tap",y="gesturestart",z="gesturechange",A="gestureend",B="gesturetap";d.touch&&(o="touchstart",p="touchmove",q="touchend touchcancel"),e&&(o="MSPointerDown",p="MSPointerMove",q="MSPointerUp MSPointerCancel");var F=h.extend({init:function(a,b){var c=this;c.axis=a,c._updateLocationData(b),c.startLocation=c.location,c.velocity=c.delta=0,c.timeStamp=k()},move:function(a){var b=this,c=a["page"+b.axis],d=k();if(!!c||!n)b.delta=c-b.location,b._updateLocationData(a),b.initialDelta=c-b.startLocation,b.velocity=b.delta/(d-b.timeStamp),b.timeStamp=d},_updateLocationData:function(a){var b=this,c=b.axis;b.location=a["page"+c],b.client=a["client"+c],b.screen=a["screen"+c]}}),G=h.extend({init:function(a,b,c){var d=this;l(d,{x:new F("X",c.location),y:new F("Y",c.location),userEvents:a,target:b,currentTarget:c.currentTarget,id:c.id,_moved:!1,_finished:!1}),d._trigger(s,c)},move:function(a){var b=this;if(!b._finished){b.x.move(a.location),b.y.move(a.location);if(!b._moved){if(b._withinIgnoreThreshold())return;if(!H.current||H.current===b.userEvents)b._start(a);else return b.dispose()}b._finished||b._trigger(u,a)}},end:function(a){var b=this;b.endTime=k();b._finished||(b._moved?b._trigger(v,a):b._trigger(x,a),b.dispose())},dispose:function(){var b=this,c=b.userEvents,d=c.touches;b._finished=!0,d.splice(a.inArray(b,d),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(a){this.startTime=k(),this._moved=!0,this._trigger(t,a)},_trigger:function(a,b){var c=this,d=b.event,e={touch:c,x:c.x,y:c.y,target:c.target,event:d};c.userEvents.notify(a,e)&&d.preventDefault()},_withinIgnoreThreshold:function(){var a=this.x.initialDelta,b=this.y.initialDelta;return Math.sqrt(a*a+b*b)<=this.userEvents.threshold}}),H=i.extend({init:function(b,c){var f=this,h,k,m={};c=c||{},h=f.filter=c.filter,f.threshold=c.threshold||0,f.touches=[],f._maxTouches=c.multiTouch?2:1,b=a(b),i.fn.init.call(f),l(f,{eventMap:m,element:b,surface:c.global?g:c.surface||b,stopPropagation:c.stopPropagation,pressed:!1}),m[p]=function(a){f._move(a)},m[q]=function(a){f._end(a)},b.on(o+r,h,j(f._start,f)),f.surface.on(m),e&&b.css("-ms-touch-action","pinch-zoom double-tap-zoom");if(!c.allowSelection){var n=["mousedown"+r+" selectstart"+r+" dragstart"+r,h,C];h instanceof a&&n.splice(2,0,null),b.on.apply(b,n)}d.eventCapture&&(k=function(a){f._isMoved()&&a.preventDefault()},f.surface[0].addEventListener(d.mouseup,k,!0)),f.bind([s,x,t,u,v,w,y,z,A,B],c)},destroy:function(){this.element.off(r),this.surface.off(this.eventMap),this._disposeAll()},capture:function(){H.current=this},cancel:function(){this._disposeAll(),this.trigger(w)},notify:function(b,c){var d=this,e=d.touches;if(this._isMultiTouch()){switch(b){case u:b=z;break;case v:b=A;break;case x:b=B}a.extend(c,{touches:e},D(e[0],e[1]))}return this.trigger(b,c)},press:function(a,b){this._apiCall("_start",a,b)},move:function(a,b){this._apiCall("_move",a,b)},end:function(a,b){this._apiCall("_end",a,b)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){a.each(this.touches,function(){this.dispose()})},_isMoved:function(){return a.grep(this.touches,function(a){return a.isMoved()}).length},_isPressed:function(){return this.touches.length},_start:function(b){var c=this,d=0,e=c.filter,f,g=E(b),h=g.length,i;if(!c._maxTouchesReached()){H.current=null,c.currentTarget=b.currentTarget,c.stopPropagation&&b.stopPropagation();for(;d<h;d++){if(c._maxTouchesReached())break;i=g[d],f=a(i.target),e?f=f.is(e)?f:f.closest(e):f=c.element;if(!f.length)continue;c.touches.push(new G(c,f,i)),c._isMultiTouch()&&c.notify("gesturestart",{})}}},_move:function(a){this._eachTouch("move",a)},_end:function(a){this._eachTouch("end",a)},_eachTouch:function(a,b){var c=this,d={},e=E(b),f=c.touches,g,h,i,j;for(g=0;g<f.length;g++)h=f[g],d[h.id]=h;for(g=0;g<e.length;g++)i=e[g],j=d[i.id],j&&j[a](i)},_apiCall:function(a,b,c){this[a]({api:!0,pageX:b,pageY:c,target:this.element})}});c.getTouches=E,c.touchDelta=D,c.UserEvents=H})(jQuery);